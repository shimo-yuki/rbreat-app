    <input type="button" id="startbtn" value="スタート" onclick="myBar();">
        <input type="button" id="finishbtn" value="終了" >
        <div id="txt">ここにデータを表示</div>
        <canvas id="result"></canvas>
      

<script>


var aZ = 0;                // 加速度の値を入れる変数を3個用意
var realZ = [],  imaginaryZ = [];
var fftZ = new FFT();

aZ = dat.accelerationIncludingGravity.z; 

var timer = window.setInterval(() => {
    realZ.push(aZ)
    console.log('a')
}, 100); // 33msごとに（1秒間に約100回）

var time = [], amp = []
document.getElementById("finishbtn").onclick = function(){
     for(var i = 0; i < 100; i++){
    //  realZ.push(Math.sin(2*Math.PI*(1/20)*i));
      time.push(i * 5 / 100)
      }
    // console.log(time)
    var txt = document.getElementById("console");
    txt.innerHTML = "real: " + realZ + "<br>"
                  + "imaginary: " + imaginaryZ ;

                  imaginaryX = new Array(realZ.length);
                  imaginaryX.fill(0);
                  originalX = realZ.slice(0); 
                  fftX.calc(1, realZ, imaginaryX)
                  var phase = fftX.phase(realZ, imaginaryX);
                  var frequencies = fftX.frequencies(realZ, imaginaryX, 1); //周波数
                  var amplitude = fftX.amplitude(realZ, imaginaryX); //振幅
                  var periods = fftX.periods(realZ, imaginaryX, 1);
                  console.log(frequencies)
                  console.log(amplitude)
              
                  ctbar = document.getElementById("result").getContext("2d");
                  myBar = new Chart(ctbar, {
                      type: "line",    // ★必須　グラフの種類
                      data: {
                          labels:  amp,  // Ｘ軸のラベル
                          datasets: [
                              {
                                  label: "FFT実行結果",
                                  fill: false,                            // 系列名
                                  data: amplitude                   // ★必須　系列Ａのデータ
                              }
                          ]
                      },
                      options: {
                          title: {                           //タイトル設定
                              display: true,                 //表示設定
                              fontSize: 18,                  //フォントサイズ
                              text: 'FFTの実行結果'                //ラベル
                          },
                      scales: {
                          yAxes: [{                      //y軸設定
                              display: true,             //表示設定
                              scaleLabel: {              //軸ラベル設定
                              display: true,          //表示設定
                              labelString: '振幅',  //ラベル
                              fontSize: 18               //フォントサイズ
                              },
                          }],
                          xAxes: [{
                              display: true,                //表示設定
                                  scaleLabel: {                 //軸ラベル設定
                                  display: true,             //表示設定
                                  labelString: '周波数(Hz)',  //ラベル
                                  fontSize: 18               //フォントサイズ
                                  },
                              }]
                          }
                      }
                  });
              };
              </script>